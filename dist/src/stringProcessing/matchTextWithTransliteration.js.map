{"version":3,"sources":["../../../src/stringProcessing/matchTextWithTransliteration.js"],"names":["map","addWordBoundary","stripSpaces","transliterate","transliterateWP","replaceTurkishIsMemoized","toRegex","keyword","RegExp","text","locale","keywordRegex","turkishMappings","x","join","matches","match","replace","transliterateKeyword","transliterateKeywordRegex","transliterateMatches","combinedArray","concat","transliterateWPKeyword","transliterateWPKeywordRegex","transliterateWPMatches"],"mappings":"AAAA,SAASA,GAAT,QAAoB,WAApB;AACA,OAAOC,eAAP,MAA4B,sBAA5B;AACA,OAAOC,WAAP,MAAwB,kBAAxB;AACA,OAAOC,aAAP,MAA0B,oBAA1B;AACA,OAAOC,eAAP,MAA4B,2BAA5B;AACA,SAASC,wBAAT,QAAyC,4BAAzC;;AAEA;;;;;AAKA,IAAIC,UAAU,UAAUC,OAAV,EAAoB;AACjCA,WAAUN,gBAAiBM,OAAjB,CAAV;AACA,QAAO,IAAIC,MAAJ,CAAYD,OAAZ,EAAqB,IAArB,CAAP;AACA,CAHD;;AAKA;;;;;;;AAOA,eAAe,UAAUE,IAAV,EAAgBF,OAAhB,EAAyBG,MAAzB,EAAkC;AAChD,KAAIC,eAAeL,QAASC,OAAT,CAAnB;;AAEA,KAAKG,WAAW,OAAhB,EAA0B;AACzB,QAAME,kBAAkBP,yBAA0BE,OAA1B,CAAxB;AACAI,iBAAe,IAAIH,MAAJ,CAAYI,gBAAgBZ,GAAhB,CAAqBa,KAAKZ,gBAAiBY,CAAjB,CAA1B,EAAiDC,IAAjD,CAAuD,GAAvD,CAAZ,EAA0E,IAA1E,CAAf;AACA;AACD,KAAIC,UAAUN,KAAKO,KAAL,CAAYL,YAAZ,KAA8B,EAA5C;;AAEAF,QAAOA,KAAKQ,OAAL,CAAcN,YAAd,EAA4B,EAA5B,CAAP;;AAEA,KAAIO,uBAAuBf,cAAeI,OAAf,EAAwBG,MAAxB,CAA3B;AACA,KAAIS,4BAA4Bb,QAASY,oBAAT,CAAhC;AACA,KAAIE,uBAAuBX,KAAKO,KAAL,CAAYG,yBAAZ,KAA2C,EAAtE;AACA,KAAIE,gBAAgBN,QAAQO,MAAR,CAAgBF,oBAAhB,CAApB;;AAEA,KAAIG,yBAAyBnB,gBAAiBG,OAAjB,EAA0BG,MAA1B,CAA7B;;AAEA,KAAK,EAAIa,2BAA2BL,oBAA/B,CAAL,EAA6D;AAC5D,MAAIM,8BAA8BlB,QAASiB,sBAAT,CAAlC;AACA,MAAIE,yBAAyBhB,KAAKO,KAAL,CAAYQ,2BAAZ,KAA6C,EAA1E;;AAEAH,kBAAgBA,cAAcC,MAAd,CAAsBG,sBAAtB,CAAhB;AACA;;AAED,QAAOzB,IAAKqB,aAAL,EAAoB,UAAUL,KAAV,EAAkB;AAC5C,SAAOd,YAAac,KAAb,CAAP;AACA,EAFM,CAAP;AAGA","file":"matchTextWithTransliteration.js","sourcesContent":["import { map } from \"lodash-es\";\nimport addWordBoundary from \"./addWordboundary.js\";\nimport stripSpaces from \"./stripSpaces.js\";\nimport transliterate from \"./transliterate.js\";\nimport transliterateWP from \"./transliterateWPstyle.js\";\nimport { replaceTurkishIsMemoized } from \"./specialCharacterMappings\";\n\n/**\n * Creates a regex from the keyword with included wordboundaries.\n * @param {string} keyword The keyword to create a regex from.\n * @returns {RegExp} Regular expression of the keyword with wordboundaries.\n */\nvar toRegex = function( keyword ) {\n\tkeyword = addWordBoundary( keyword );\n\treturn new RegExp( keyword, \"ig\" );\n};\n\n/**\n * Matches a string with and without transliteration.\n * @param {string} text The text to match.\n * @param {string} keyword The keyword to match in the text.\n * @param {string} locale The locale used for transliteration.\n * @returns {Array} All matches from the original as the transliterated text and keyword.\n */\nexport default function( text, keyword, locale ) {\n\tvar keywordRegex = toRegex( keyword );\n\n\tif ( locale === \"tr_TR\" ) {\n\t\tconst turkishMappings = replaceTurkishIsMemoized( keyword );\n\t\tkeywordRegex = new RegExp( turkishMappings.map( x => addWordBoundary( x ) ).join( \"|\" ), \"ig\" );\n\t}\n\tvar matches = text.match( keywordRegex ) || [];\n\n\ttext = text.replace( keywordRegex, \"\" );\n\n\tvar transliterateKeyword = transliterate( keyword, locale );\n\tvar transliterateKeywordRegex = toRegex( transliterateKeyword );\n\tvar transliterateMatches = text.match( transliterateKeywordRegex ) || [];\n\tvar combinedArray = matches.concat( transliterateMatches );\n\n\tvar transliterateWPKeyword = transliterateWP( keyword, locale );\n\n\tif ( ! ( transliterateWPKeyword === transliterateKeyword ) ) {\n\t\tvar transliterateWPKeywordRegex = toRegex( transliterateWPKeyword );\n\t\tvar transliterateWPMatches = text.match( transliterateWPKeywordRegex ) || [];\n\n\t\tcombinedArray = combinedArray.concat( transliterateWPMatches );\n\t}\n\n\treturn map( combinedArray, function( match ) {\n\t\treturn stripSpaces( match );\n\t} );\n}\n\n\n"]}