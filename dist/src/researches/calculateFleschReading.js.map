{"version":3,"sources":["../../../src/researches/calculateFleschReading.js"],"names":["stripNumbers","countSentences","countWords","countSyllables","formatNumber","getLanguage","getAverage","total","amount","paper","score","text","getText","locale","getLocale","language","numberOfSentences","numberOfWords","numberOfSyllables","averageWordsPerSentence","syllablesPer100Words"],"mappings":"AAAA;;AAEA,OAAOA,YAAP,MAAyB,qCAAzB;;AAEA,OAAOC,cAAP,MAA2B,uCAA3B;AACA,OAAOC,UAAP,MAAuB,mCAAvB;AACA,OAAOC,cAAP,MAA2B,wCAA3B;AACA,OAAOC,YAAP,MAAyB,4BAAzB;AACA,OAAOC,WAAP,MAAwB,2BAAxB;;AAEA;;;;;;;AAOA,MAAMC,aAAa,UAAUC,KAAV,EAAiBC,MAAjB,EAA0B;AAC5C,QAAOD,QAAQC,MAAf;AACA,CAFD;;AAIA;;;;;;AAMA,eAAe,UAAUC,KAAV,EAAkB;AAChC,KAAIC,KAAJ;AACA,KAAIC,OAAOF,MAAMG,OAAN,EAAX;AACA,OAAMC,SAASJ,MAAMK,SAAN,EAAf;AACA,OAAMC,WAAWV,YAAaQ,MAAb,CAAjB;AACA,KAAKF,SAAS,EAAd,EAAmB;AAClB,SAAO,CAAP;AACA;;AAEDA,QAAOX,aAAcW,IAAd,CAAP;;AAEA,OAAMK,oBAAoBf,eAAgBU,IAAhB,CAA1B;;AAEA,OAAMM,gBAAgBf,WAAYS,IAAZ,CAAtB;;AAEA;AACA,KAAKK,sBAAsB,CAAtB,IAA2BC,kBAAkB,CAAlD,EAAsD;AACrD,SAAO,CAAP;AACA;;AAED,OAAMC,oBAAoBf,eAAgBQ,IAAhB,EAAsBE,MAAtB,CAA1B;AACA,OAAMM,0BAA0Bb,WAAYW,aAAZ,EAA2BD,iBAA3B,CAAhC;AACA,OAAMI,uBAAuBF,qBAAsB,MAAMD,aAA5B,CAA7B;;AAEA,SAASF,QAAT;AACC,OAAK,IAAL;AACCL,WAAQ,SAAW,OAAOU,oBAAlB,GAA6C,OAASD,uBAA9D;AACA;AACD,OAAK,IAAL;AACCT,WAAQ,MAAMS,uBAAN,GAAkC,OAAOD,iBAAP,GAA2BD,aAArE;AACA;AACD,OAAK,IAAL;AACCP,WAAQ,MAAQ,MAAMS,uBAAd,GAA4C,MAAMC,oBAA1D;AACA;AACD,OAAK,IAAL;AACCV,WAAQ,UAAY,MAAMO,aAAN,GAAsBD,iBAAlC,GAA0D,OAAOE,iBAAP,GAA2BD,aAA7F;AACA;;AAED,OAAK,IAAL;AACCP,WAAQ,SAAW,OAAOO,aAAP,GAAuBD,iBAAlC,GAA0D,MAAMI,oBAAxE;AACA;;AAED,OAAK,IAAL;AACCV,WAAQ,MAAQ,QAAQO,aAAR,GAAwBD,iBAAhC,GAAwD,OAAOE,iBAAP,GAA2BD,aAA3F;AACA;;AAED,OAAK,IAAL;AACA;AACCP,WAAQ,UAAY,QAAUS,uBAAtB,GAAsD,QAASD,oBAAoBD,aAA7B,CAA9D;AACA;AAzBF;;AA6BA,QAAOb,aAAcM,KAAd,CAAP;AACA","file":"calculateFleschReading.js","sourcesContent":["/** @module analyses/calculateFleschReading */\n\nimport stripNumbers from \"../stringProcessing/stripNumbers.js\";\n\nimport countSentences from \"../stringProcessing/countSentences.js\";\nimport countWords from \"../stringProcessing/countWords.js\";\nimport countSyllables from \"../stringProcessing/syllables/count.js\";\nimport formatNumber from \"../helpers/formatNumber.js\";\nimport getLanguage from \"../helpers/getLanguage.js\";\n\n/**\n * Calculates an average from a total and an amount\n *\n * @param {number} total The total.\n * @param {number} amount The amount.\n * @returns {number} The average from the total and the amount.\n */\nconst getAverage = function( total, amount ) {\n\treturn total / amount;\n};\n\n/**\n * This calculates the flesch reading score for a given text.\n *\n * @param {object} paper The paper containing the text\n * @returns {number} The score of the flesch reading test\n */\nexport default function( paper ) {\n\tlet score;\n\tlet text = paper.getText();\n\tconst locale = paper.getLocale();\n\tconst language = getLanguage( locale );\n\tif ( text === \"\" ) {\n\t\treturn 0;\n\t}\n\n\ttext = stripNumbers( text );\n\n\tconst numberOfSentences = countSentences( text );\n\n\tconst numberOfWords = countWords( text );\n\n\t// Prevent division by zero errors.\n\tif ( numberOfSentences === 0 || numberOfWords === 0 ) {\n\t\treturn 0;\n\t}\n\n\tconst numberOfSyllables = countSyllables( text, locale );\n\tconst averageWordsPerSentence = getAverage( numberOfWords, numberOfSentences );\n\tconst syllablesPer100Words = numberOfSyllables * ( 100 / numberOfWords );\n\n\tswitch ( language ) {\n\t\tcase \"nl\":\n\t\t\tscore = 206.84 - ( 0.77 * syllablesPer100Words ) - ( 0.93 * ( averageWordsPerSentence  ) );\n\t\t\tbreak;\n\t\tcase \"de\":\n\t\t\tscore = 180 - averageWordsPerSentence - ( 58.5 * numberOfSyllables / numberOfWords );\n\t\t\tbreak;\n\t\tcase \"it\":\n\t\t\tscore = 217 - ( 1.3 * averageWordsPerSentence ) - ( 0.6 * syllablesPer100Words );\n\t\t\tbreak;\n\t\tcase \"ru\":\n\t\t\tscore = 206.835 - ( 1.3 * numberOfWords / numberOfSentences ) - ( 60.1 * numberOfSyllables / numberOfWords );\n\t\t\tbreak;\n\n\t\tcase \"es\":\n\t\t\tscore = 206.84 - ( 1.02 * numberOfWords / numberOfSentences ) - ( 0.6 * syllablesPer100Words );\n\t\t\tbreak;\n\n\t\tcase \"fr\":\n\t\t\tscore = 207 - ( 1.015 * numberOfWords / numberOfSentences ) - ( 73.6 * numberOfSyllables / numberOfWords );\n\t\t\tbreak;\n\n\t\tcase \"en\":\n\t\tdefault:\n\t\t\tscore = 206.835 - ( 1.015 * ( averageWordsPerSentence ) ) - ( 84.6 * ( numberOfSyllables / numberOfWords ) );\n\t\t\tbreak;\n\t}\n\n\n\treturn formatNumber( score );\n}\n"]}