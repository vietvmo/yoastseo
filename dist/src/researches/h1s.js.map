{"version":3,"sources":["../../../src/researches/h1s.js"],"names":["getBlocks","reject","h1Regex","emptyBlock","block","trim","paper","text","getText","blocks","h1s","forEach","index","match","exec","push","tag","content","position"],"mappings":"AAAA,SAASA,SAAT,QAA0B,iBAA1B;AACA,SAASC,MAAT,QAAuB,WAAvB;;AAEA,MAAMC,UAAU,oBAAhB;;AAEA;;;;;;;AAOA,MAAMC,aAAa,UAAUC,KAAV,EAAkB;AACpCA,SAAQA,MAAMC,IAAN,EAAR;AACA,QAAOD,UAAU,SAAV,IAAuBA,UAAU,EAAxC;AACA,CAHD;;AAMA;;;;;;;AAOA,eAAe,UAAUE,KAAV,EAAkB;AAChC,OAAMC,OAAOD,MAAME,OAAN,EAAb;;AAEA,KAAIC,SAAST,UAAWO,IAAX,CAAb;AACAE,UAASR,OAAQQ,MAAR,EAAgBN,UAAhB,CAAT;;AAEA,OAAMO,MAAM,EAAZ;AACAD,QAAOE,OAAP,CAAgB,CAAEP,KAAF,EAASQ,KAAT,KAAoB;AACnC,QAAMC,QAAQX,QAAQY,IAAR,CAAcV,KAAd,CAAd;AACA,MAAKS,KAAL,EAAa;AACZH,OAAIK,IAAJ,CAAU;AACTC,SAAK,IADI;AAETC,aAASJ,MAAO,CAAP,CAFA;AAGTK,cAAUN;AAHD,IAAV;AAKA;AACD,EATD;;AAWA,QAAOF,GAAP;AACA","file":"h1s.js","sourcesContent":["import { getBlocks } from \"../helpers/html\";\nimport { reject } from \"lodash-es\";\n\nconst h1Regex = /<h1.*?>(.*?)<\\/h1>/;\n\n/**\n * Gets a block from a text and checks if it is totally empty or if it is an empty paragraph.\n *\n * @param {string} block A HTML block extracted from the paper.\n *\n * @returns {boolean} Whether the block is empty or not.\n */\nconst emptyBlock = function( block ) {\n\tblock = block.trim();\n\treturn block === \"<p></p>\" || block === \"\";\n};\n\n\n/**\n * Gets all H1s in a text, including their content and their position with regards to other HTML blocks.\n *\n * @param {Paper} paper The paper for which to get the H1s.\n *\n * @returns {Array} An array with all H1s, their content and position.\n */\nexport default function( paper ) {\n\tconst text = paper.getText();\n\n\tlet blocks = getBlocks( text );\n\tblocks = reject( blocks, emptyBlock );\n\n\tconst h1s = [];\n\tblocks.forEach( ( block, index ) => {\n\t\tconst match = h1Regex.exec( block );\n\t\tif ( match ) {\n\t\t\th1s.push( {\n\t\t\t\ttag: \"h1\",\n\t\t\t\tcontent: match[ 1 ],\n\t\t\t\tposition: index,\n\t\t\t} );\n\t\t}\n\t} );\n\n\treturn h1s;\n}\n"]}