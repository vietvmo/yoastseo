{"version":3,"sources":["../../../src/worker/createWorker.js"],"names":["createBlobURL","url","URL","window","webkitURL","BlobBuilder","WebKitBlobBuilder","MozBlobBuilder","blob","Blob","type","e1","blobBuilder","append","getBlob","createObjectURL","createWorker","worker","Worker","e","blobUrl","e2"],"mappings":"AAAA;;;;;;AAMA,SAASA,aAAT,CAAwBC,GAAxB,EAA8B;AAC7B,OAAMC,MAAMC,OAAOD,GAAP,IAAcC,OAAOC,SAAjC;AACA,OAAMC,cAAcF,OAAOE,WAAP,IAAsBF,OAAOG,iBAA7B,IAAkDH,OAAOI,cAA7E;;AAEA,KAAIC,IAAJ;AACA,KAAI;AACHA,SAAO,IAAIC,IAAJ,CAAU,CAAE,oBAAoBR,GAApB,GAA0B,KAA5B,CAAV,EAA+C,EAAES,MAAM,wBAAR,EAA/C,CAAP;AACA,EAFD,CAEE,OAAQC,EAAR,EAAa;AACd,QAAMC,cAAc,IAAIP,WAAJ,EAApB;AACAO,cAAYC,MAAZ,CAAoB,oBAAoBZ,GAApB,GAA0B,KAA9C;AACAO,SAAOI,YAAYE,OAAZ,CAAqB,wBAArB,CAAP;AACA;AACD,QAAOZ,IAAIa,eAAJ,CAAqBP,IAArB,CAAP;AACA;;AAED;;;;;;;AAOA,SAASQ,YAAT,CAAuBf,GAAvB,EAA6B;AAC5B,KAAIgB,SAAS,IAAb;AACA,KAAI;AACHA,WAAS,IAAIC,MAAJ,CAAYjB,GAAZ,CAAT;AACA,EAFD,CAEE,OAAQkB,CAAR,EAAY;AACb,MAAI;AACH,SAAMC,UAAUpB,cAAeC,GAAf,CAAhB;AACAgB,YAAS,IAAIC,MAAJ,CAAYE,OAAZ,CAAT;AACA,GAHD,CAGE,OAAQC,EAAR,EAAa;AACd,SAAMA,EAAN;AACA;AACD;AACD,QAAOJ,MAAP;AACA;;AAED,eAAeD,YAAf","file":"createWorker.js","sourcesContent":["/**\n * Creates an URL to a blob. This blob imports a script for use in a web worker (using `importScripts`).\n *\n * @param {string} url The URL to the script that has to be loaded.\n * @returns {string} the URL to the blob.\n */\nfunction createBlobURL( url ) {\n\tconst URL = window.URL || window.webkitURL;\n\tconst BlobBuilder = window.BlobBuilder || window.WebKitBlobBuilder || window.MozBlobBuilder;\n\n\tlet blob;\n\ttry {\n\t\tblob = new Blob( [ \"importScripts('\" + url + \"');\" ], { type: \"application/javascript\" } );\n\t} catch ( e1 ) {\n\t\tconst blobBuilder = new BlobBuilder();\n\t\tblobBuilder.append( \"importScripts('\" + url + \"');\" );\n\t\tblob = blobBuilder.getBlob( \"application/javascript\" );\n\t}\n\treturn URL.createObjectURL( blob );\n}\n\n/**\n * Creates a WebWorker using the given url.\n *\n * @param {string} url The url of the worker.\n *\n * @returns {Worker} The worker.\n */\nfunction createWorker( url ) {\n\tlet worker = null;\n\ttry {\n\t\tworker = new Worker( url );\n\t} catch ( e ) {\n\t\ttry {\n\t\t\tconst blobUrl = createBlobURL( url );\n\t\t\tworker = new Worker( blobUrl );\n\t\t} catch ( e2 ) {\n\t\t\tthrow e2;\n\t\t}\n\t}\n\treturn worker;\n}\n\nexport default createWorker;\n"]}