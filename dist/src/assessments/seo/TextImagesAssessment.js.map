{"version":3,"sources":["../../../../src/assessments/seo/TextImagesAssessment.js"],"names":["merge","Assessment","inRangeStartEndInclusive","createAnchorOpeningTag","AssessmentResult","TextImagesAssessment","constructor","config","defaultConfig","parametersRecalibration","lowerBoundary","upperBoundary","scoresRegular","noImages","withAltKeyword","withAltNonKeyword","withAlt","noAlt","scoresRecalibration","withAltGoodNumberOfKeywordMatches","withAltTooFewKeywordMatches","withAltTooManyKeywordMatches","urlTitle","urlCallToAction","identifier","_config","getResult","paper","researcher","i18n","imageCount","getResearch","altProperties","calculatedScore","process","env","YOAST_RECALIBRATION","_minNumberOfKeywordMatches","Math","ceil","_maxNumberOfKeywordMatches","floor","calculateResultRecalibration","calculateResultRegular","assessmentResult","setScore","score","setText","resultText","isApplicable","hasText","sprintf","dgettext","hasTooFewMatches","hasGoodNumberOfMatches","hasTooManyMatches","dngettext"],"mappings":"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","file":"TextImagesAssessment.js","sourcesContent":["import { merge } from \"lodash-es\";\n\nimport Assessment from \"../../assessment\";\nimport { inRangeStartEndInclusive } from \"../../helpers/inRange.js\";\nimport { createAnchorOpeningTag } from \"../../helpers/shortlinker\";\nimport AssessmentResult from \"../../values/AssessmentResult\";\n\n/**\n * Represents the assessment that will look if the images have alt-tags and checks if the keyword is present in one of them.\n */\nexport default class TextImagesAssessment extends Assessment {\n\t/**\n\t * Sets the identifier and the config.\n\t *\n\t * @param {object} config The configuration to use.\n\t *\n\t * @returns {void}\n\t */\n\tconstructor( config = {} ) {\n\t\tsuper();\n\n\t\tconst defaultConfig = {\n\t\t\tparametersRecalibration: {\n\t\t\t\tlowerBoundary: 0.3,\n\t\t\t\tupperBoundary: 0.75,\n\t\t\t},\n\t\t\tscoresRegular: {\n\t\t\t\tnoImages: 3,\n\t\t\t\twithAltKeyword: 9,\n\t\t\t\twithAltNonKeyword: 6,\n\t\t\t\twithAlt: 6,\n\t\t\t\tnoAlt: 6,\n\t\t\t},\n\t\t\tscoresRecalibration: {\n\t\t\t\tnoImages: 3,\n\t\t\t\twithAltGoodNumberOfKeywordMatches: 9,\n\t\t\t\twithAltTooFewKeywordMatches: 6,\n\t\t\t\twithAltTooManyKeywordMatches: 6,\n\t\t\t\twithAltNonKeyword: 6,\n\t\t\t\twithAlt: 6,\n\t\t\t\tnoAlt: 6,\n\t\t\t},\n\t\t\turlTitle: createAnchorOpeningTag( \"https://yoa.st/33c\" ),\n\t\t\turlCallToAction: createAnchorOpeningTag( \"https://yoa.st/33d\" ),\n\t\t};\n\n\t\tthis.identifier = \"textImages\";\n\t\tthis._config = merge( defaultConfig, config );\n\t}\n\n\t/**\n\t * Execute the Assessment and return a result.\n\t *\n\t * @param {Paper} paper The Paper object to assess.\n\t * @param {Researcher} researcher The Researcher object containing all available researches.\n\t * @param {Jed} i18n The locale object.\n\t *\n\t * @returns {AssessmentResult} The result of the assessment, containing both a score and a descriptive text.\n\t */\n\tgetResult( paper, researcher, i18n ) {\n\t\tthis.imageCount = researcher.getResearch( \"imageCount\" );\n\t\tthis.altProperties = researcher.getResearch( \"altTagCount\" );\n\n\t\tlet calculatedScore;\n\t\tif ( process.env.YOAST_RECALIBRATION === \"enabled\" ) {\n\t\t\tthis._minNumberOfKeywordMatches = Math.ceil( this.imageCount * this._config.parametersRecalibration.lowerBoundary );\n\t\t\tthis._maxNumberOfKeywordMatches = Math.floor( this.imageCount * this._config.parametersRecalibration.upperBoundary );\n\n\t\t\tcalculatedScore = this.calculateResultRecalibration( i18n );\n\t\t} else {\n\t\t\tcalculatedScore = this.calculateResultRegular( i18n );\n\t\t}\n\n\t\tconst assessmentResult = new AssessmentResult();\n\t\tassessmentResult.setScore( calculatedScore.score );\n\t\tassessmentResult.setText( calculatedScore.resultText );\n\n\t\treturn assessmentResult;\n\t}\n\n\t/**\n\t * Checks whether the paper has text.\n\t *\n\t * @param {Paper} paper The paper to use for the assessment.\n\t *\n\t * @returns {boolean} True when there is text.\n\t */\n\tisApplicable( paper ) {\n\t\treturn paper.hasText();\n\t}\n\n\t/**\n\t * Calculate the score and the feedback string based on the current image count and current image alt-tag count.\n\t *\n\t * @param {Jed} i18n The object used for translations.\n\t *\n\t * @returns {Object} The calculated score and the feedback string.\n\t */\n\tcalculateResultRegular( i18n ) {\n\t\tif ( this.imageCount === 0 ) {\n\t\t\treturn {\n\t\t\t\tscore: this._config.scoresRegular.noImages,\n\t\t\t\tresultText: i18n.sprintf(\n\t\t\t\t\t/* Translators: %1$s and %2$s expand to links on yoast.com, %3$s expands to the anchor end tag */\n\t\t\t\t\ti18n.dgettext( \"js-text-analysis\", \"%1$sImage alt attributes%3$s: No images appear on this page. %2$sAdd some%3$s!\" ),\n\t\t\t\t\tthis._config.urlTitle,\n\t\t\t\t\tthis._config.urlCallToAction,\n\t\t\t\t\t\"</a>\"\n\t\t\t\t),\n\t\t\t};\n\t\t}\n\n\t\t// Has alt-tag and keywords\n\t\tif ( this.altProperties.withAltKeyword > 0 ) {\n\t\t\treturn {\n\t\t\t\tscore: this._config.scoresRegular.withAltKeyword,\n\t\t\t\tresultText: i18n.sprintf(\n\t\t\t\t\t/* Translators:  %1$s expands to a link on yoast.com, %2$s expands to the anchor end tag */\n\t\t\t\t\ti18n.dgettext( \"js-text-analysis\", \"%1$sImage alt attributes%2$s: \" +\n\t\t\t\t\t\t\"Some images on this page contain alt attributes with words from your keyphrase! Good job!\" ),\n\t\t\t\t\tthis._config.urlTitle,\n\t\t\t\t\t\"</a>\"\n\t\t\t\t),\n\t\t\t};\n\t\t}\n\n\t\t// Has alt-tag, but no keywords and it's not okay\n\t\tif ( this.altProperties.withAltNonKeyword > 0 ) {\n\t\t\treturn {\n\t\t\t\tscore: this._config.scoresRegular.withAltNonKeyword,\n\t\t\t\tresultText: i18n.sprintf(\n\t\t\t\t\t/* Translators: %1$s and %2$s expand to links on yoast.com, %3$s expands to the anchor end tag */\n\t\t\t\t\ti18n.dgettext( \"js-text-analysis\", \"%1$sImage alt attributes%3$s: \" +\n\t\t\t\t\t\t\"Images on this page do not have alt attributes with words from your keyphrase. %2$sFix that%3$s!\" ),\n\t\t\t\t\tthis._config.urlTitle,\n\t\t\t\t\tthis._config.urlCallToAction,\n\t\t\t\t\t\"</a>\"\n\t\t\t\t),\n\t\t\t};\n\t\t}\n\n\t\t// Has alt-tag, but no keyword is set\n\t\tif ( this.altProperties.withAlt > 0 ) {\n\t\t\treturn {\n\t\t\t\tscore: this._config.scoresRegular.withAlt,\n\t\t\t\tresultText: i18n.sprintf(\n\t\t\t\t\t/* Translators: %1$s and %2$s expand to links on yoast.com, %3$s expands to the anchor end tag */\n\t\t\t\t\ti18n.dgettext( \"js-text-analysis\", \"%1$sImage alt attributes%3$s: \" +\n\t\t\t\t\t\t\"Images on this page do not have alt attributes with words from your keyphrase. %2$sFix that%3$s!\" ),\n\t\t\t\t\tthis._config.urlTitle,\n\t\t\t\t\tthis._config.urlCallToAction,\n\t\t\t\t\t\"</a>\"\n\t\t\t\t),\n\t\t\t};\n\t\t}\n\n\t\t// Has no alt-tag\n\t\tif ( this.altProperties.noAlt > 0 ) {\n\t\t\treturn {\n\t\t\t\tscore: this._config.scoresRegular.noAlt,\n\t\t\t\tresultText: i18n.sprintf(\n\t\t\t\t\t/* Translators: %1$s and %2$s expand to links on yoast.com, %3$s expands to the anchor end tag */\n\t\t\t\t\ti18n.dgettext( \"js-text-analysis\", \"%1$sImage alt attributes%3$s: \" +\n\t\t\t\t\t\t\"Images on this page do not have alt attributes with words from your keyphrase. %2$sFix that%3$s!\" ),\n\t\t\t\t\tthis._config.urlTitle,\n\t\t\t\t\tthis._config.urlCallToAction,\n\t\t\t\t\t\"</a>\"\n\t\t\t\t),\n\t\t\t};\n\t\t}\n\t\treturn null;\n\t}\n\n\t/**\n\t * Checks whether there are too few alt tags with keywords. This check is applicable when there are\n\t * 5 or more images.\n\t *\n\t * @returns {boolean} Returns true if there are at least 5 images and the number of alt tags\n\t * with keywords is under the specified recommended minimum.\n\t */\n\thasTooFewMatches() {\n\t\treturn this.imageCount > 4 && this.altProperties.withAltKeyword > 0 &&\n\t\t\tthis.altProperties.withAltKeyword < this._minNumberOfKeywordMatches;\n\t}\n\n\t/**\n\t * Checks whether there is a sufficient number of alt tags with keywords. There are different recommended\n\t * ranges for less than 5 keywords, exactly 5 keywords, and more than 5 keywords.\n\t *\n\t * @returns {boolean} Returns true if the number of alt tags with keywords is within the recommended range.\n\t */\n\thasGoodNumberOfMatches() {\n\t\treturn ( ( this.imageCount < 5 && this.altProperties.withAltKeyword > 0 ) ||\n\t\t\t( this.imageCount === 5 && inRangeStartEndInclusive( this.altProperties.withAltKeyword, 2, 4 ) ) ||\n\t\t\t( this.imageCount > 4 &&\n\t\t\t\tinRangeStartEndInclusive( this.altProperties.withAltKeyword, this._minNumberOfKeywordMatches, this._maxNumberOfKeywordMatches ) ) );\n\t}\n\n\t/**\n\t * Checks whether there is a sufficient number of alt tags with keywords. This check is applicable when there are\n\t * 5 or more images.\n\t *\n\t * @returns {boolean} Returns true if there are at least 5 images and the number of alt tags with keywords\n\t * is within the recommended range.\n\t */\n\thasTooManyMatches() {\n\t\treturn this.imageCount > 4 && this.altProperties.withAltKeyword > this._maxNumberOfKeywordMatches;\n\t}\n\n\n\t/**\n\t * Calculate the result based on the current image count and current image alt-tag count.\n\t *\n\t * @param {Object} i18n The object used for translations.\n\t *\n\t * @returns {Object} The calculated result.\n\t */\n\tcalculateResultRecalibration( i18n ) {\n\t\t// No images.\n\t\tif ( this.imageCount === 0 ) {\n\t\t\treturn {\n\t\t\t\tscore: this._config.scoresRecalibration.noImages,\n\t\t\t\tresultText: i18n.sprintf(\n\t\t\t\t\t/* Translators: %1$s and %2$s expand to links on yoast.com, %3$s expands to the anchor end tag */\n\t\t\t\t\ti18n.dgettext(\n\t\t\t\t\t\t\"js-text-analysis\",\n\t\t\t\t\t\t\"%1$sImage alt attributes%3$s: No images appear on this page. %2$sAdd some%3$s!\"\n\t\t\t\t\t),\n\t\t\t\t\tthis._config.urlTitle,\n\t\t\t\t\tthis._config.urlCallToAction,\n\t\t\t\t\t\"</a>\"\n\t\t\t\t),\n\t\t\t};\n\t\t}\n\n\t\t// Has alt-tags, but no keyword is set.\n\t\tif ( this.altProperties.withAlt > 0 ) {\n\t\t\treturn {\n\t\t\t\tscore: this._config.scoresRecalibration.withAlt,\n\t\t\t\tresultText: i18n.sprintf(\n\t\t\t\t\t/* Translators: %1$s and %2$s expand to links on yoast.com, %3$s expands to the anchor end tag */\n\t\t\t\t\ti18n.dgettext(\n\t\t\t\t\t\t\"js-text-analysis\",\n\t\t\t\t\t\t\"%1$sImage alt attributes%3$s: \" +\n\t\t\t\t\t\t\"Images on this page have alt attributes, but you have not set your keyphrase. %2$sFix that%3$s!\"\n\t\t\t\t\t),\n\t\t\t\t\tthis._config.urlTitle,\n\t\t\t\t\tthis._config.urlCallToAction,\n\t\t\t\t\t\"</a>\"\n\t\t\t\t),\n\t\t\t};\n\t\t}\n\n\t\t// Has alt-tags, but no keywords while a keyword is set.\n\t\tif ( this.altProperties.withAltNonKeyword > 0 && this.altProperties.withAltKeyword === 0 ) {\n\t\t\treturn {\n\t\t\t\tscore: this._config.scoresRecalibration.withAltNonKeyword,\n\t\t\t\tresultText: i18n.sprintf(\n\t\t\t\t\t/* Translators: %1$s and %2$s expand to links on yoast.com, %3$s expands to the anchor end tag */\n\t\t\t\t\ti18n.dgettext(\n\t\t\t\t\t\t\"js-text-analysis\",\n\t\t\t\t\t\t\"%1$sImage alt attributes%3$s: \" +\n\t\t\t\t\t\t\"Images on this page do not have alt attributes that reflect the topic of your text. \" +\n\t\t\t\t\t\t\"%2$sAdd your keyphrase or synonyms to the alt tags of relevant images%3$s!\"\n\t\t\t\t\t),\n\t\t\t\t\tthis._config.urlTitle,\n\t\t\t\t\tthis._config.urlCallToAction,\n\t\t\t\t\t\"</a>\"\n\t\t\t\t),\n\t\t\t};\n\t\t}\n\n\t\t// Image count â‰¥5, has alt-tags with too few keywords.\n\t\tif ( this.hasTooFewMatches() ) {\n\t\t\treturn {\n\t\t\t\tscore: this._config.scoresRecalibration.withAltTooFewKeywordMatches,\n\t\t\t\tresultText: i18n.sprintf(\n\t\t\t\t\t/* Translators: %1$d expands to the number of images containing an alt attribute with the keyword,\n\t\t\t\t\t * %2$d expands to the total number of images, %3$s and %4$s expand to links on yoast.com,\n\t\t\t\t\t * %5$s expands to the anchor end tag. */\n\t\t\t\t\ti18n.dngettext(\n\t\t\t\t\t\t\"js-text-analysis\",\n\t\t\t\t\t\t\"%3$sImage alt attributes%5$s: Out of %2$d images on this page, only %1$d has an alt attribute that \" +\n\t\t\t\t\t\t\"reflects the topic of your text. \" +\n\t\t\t\t\t\t\"%4$sAdd your keyphrase or synonyms to the alt tags of more relevant images%5$s!\",\n\t\t\t\t\t\t\"%3$sImage alt attributes%5$s: Out of %2$d images on this page, only %1$d have alt attributes that \" +\n\t\t\t\t\t\t\"reflect the topic of your text. \" +\n\t\t\t\t\t\t\"%4$sAdd your keyphrase or synonyms to the alt tags of more relevant images%5$s!\",\n\t\t\t\t\t\tthis.altProperties.withAltKeyword,\n\t\t\t\t\t),\n\t\t\t\t\tthis.altProperties.withAltKeyword,\n\t\t\t\t\tthis.imageCount,\n\t\t\t\t\tthis._config.urlTitle,\n\t\t\t\t\tthis._config.urlCallToAction,\n\t\t\t\t\t\"</a>\"\n\t\t\t\t),\n\t\t\t};\n\t\t}\n\n\t\t/*\n\t\t * The hasGoodNumberOfMatches check needs to be made before the check for too many matches because of the special rule for\n\t\t * exactly 5 matches.\n\t\t */\n\t\tif ( this.hasGoodNumberOfMatches() ) {\n\t\t\treturn {\n\t\t\t\tscore: this._config.scoresRecalibration.withAltGoodNumberOfKeywordMatches,\n\t\t\t\tresultText: i18n.sprintf(\n\t\t\t\t\t/* Translators: %1$s expands to a link on yoast.com,\n\t\t\t\t\t * %2$s expands to the anchor end tag. */\n\t\t\t\t\ti18n.dgettext(\n\t\t\t\t\t\t\"js-text-analysis\",\n\t\t\t\t\t\t\"%1$sImage alt attributes%2$s: Good job!\",\n\t\t\t\t\t),\n\t\t\t\t\tthis._config.urlTitle,\n\t\t\t\t\t\"</a>\"\n\t\t\t\t),\n\t\t\t};\n\t\t}\n\n\t\tif ( this.hasTooManyMatches() ) {\n\t\t\treturn {\n\t\t\t\tscore: this._config.scoresRecalibration.withAltTooManyKeywordMatches,\n\t\t\t\tresultText: i18n.sprintf(\n\t\t\t\t\t/* Translators: %1$d expands to the number of images containing an alt attribute with the keyword,\n                     * %2$d expands to the total number of images, %3$s and %4$s expand to a link on yoast.com,\n\t\t\t\t\t * %5$s expands to the anchor end tag. */\n\t\t\t\t\ti18n.dgettext(\n\t\t\t\t\t\t\"js-text-analysis\",\n\t\t\t\t\t\t\"%3$sImage alt attributes%5$s: Out of %2$d images on this page, %1$d have alt attributes with \" +\n\t\t\t\t\t\t\"words from your keyphrase or synonyms. \" +\n\t\t\t\t\t\t\"That's a bit much. %4$sOnly include the keyphrase or its synonyms when it really fits the image%5$s.\",\n\t\t\t\t\t),\n\t\t\t\t\tthis.altProperties.withAltKeyword,\n\t\t\t\t\tthis.imageCount,\n\t\t\t\t\tthis._config.urlTitle,\n\t\t\t\t\tthis._config.urlCallToAction,\n\t\t\t\t\t\"</a>\"\n\t\t\t\t),\n\t\t\t};\n\t\t}\n\n\t\t// Images, but no alt tags.\n\t\treturn {\n\t\t\tscore: this._config.scoresRecalibration.noAlt,\n\t\t\tresultText: i18n.sprintf(\n\t\t\t\t/* Translators: %1$s and %2$s expand to links on yoast.com, %3$s expands to the anchor end tag */\n\t\t\t\ti18n.dgettext( \"js-text-analysis\", \"%1$sImage alt attributes%3$s: \" +\n\t\t\t\t\t\"Images on this page do not have alt attributes that reflect the topic of your text. \" +\n\t\t\t\t\t\"%2$sAdd your keyphrase or synonyms to the alt tags of relevant images%3$s!\" ),\n\t\t\t\tthis._config.urlTitle,\n\t\t\t\tthis._config.urlCallToAction,\n\t\t\t\t\"</a>\"\n\t\t\t),\n\t\t};\n\t}\n}\n"]}