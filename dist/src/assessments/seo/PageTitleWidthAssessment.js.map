{"version":3,"sources":["../../../../src/assessments/seo/PageTitleWidthAssessment.js"],"names":["merge","Assessment","inRangeEndInclusive","inRange","createAnchorOpeningTag","AssessmentResult","maximumLength","PageTitleWidthAssesment","constructor","config","defaultConfig","minLength","maxLength","scores","noTitle","widthTooShort","widthTooLong","widthCorrect","urlTitle","urlCallToAction","identifier","_config","getMaximumLength","getResult","paper","researcher","i18n","pageTitleWidth","getResearch","assessmentResult","setScore","calculateScore","setText","translateScore","max","actual","sprintf","dgettext"],"mappings":"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","file":"PageTitleWidthAssessment.js","sourcesContent":["import { merge } from \"lodash-es\";\n\nimport Assessment from \"../../assessment\";\nimport { inRangeEndInclusive as inRange } from \"../../helpers/inRange\";\nimport { createAnchorOpeningTag } from \"../../helpers/shortlinker\";\nimport AssessmentResult from \"../../values/AssessmentResult\";\n\nconst maximumLength = 600;\n/**\n * Represents the assessment that will calculate if the width of the page title is correct.\n */\nexport default class PageTitleWidthAssesment extends Assessment {\n\t/**\n\t * Sets the identifier and the config.\n\t *\n\t * @param {Object} [config] The configuration to use.\n\t *\n\t * @returns {void}\n\t */\n\tconstructor( config = {} ) {\n\t\tsuper();\n\n\t\tconst defaultConfig = {\n\t\t\tminLength: 400,\n\t\t\tmaxLength: maximumLength,\n\t\t\tscores: {\n\t\t\t\tnoTitle: 1,\n\t\t\t\twidthTooShort: 6,\n\t\t\t\twidthTooLong: 3,\n\t\t\t\twidthCorrect: 9,\n\t\t\t},\n\t\t\turlTitle: createAnchorOpeningTag( \"https://yoa.st/34h\" ),\n\t\t\turlCallToAction: createAnchorOpeningTag( \"https://yoa.st/34i\" ),\n\t\t};\n\n\t\tthis.identifier = \"titleWidth\";\n\t\tthis._config = merge( defaultConfig, config );\n\t}\n\n\t/**\n\t * Returns the maximum length.\n\t *\n\t * @returns {number} The maximum length.\n\t */\n\tgetMaximumLength() {\n\t\treturn maximumLength;\n\t}\n\n\t/**\n\t * Runs the pageTitleWidth module, based on this returns an assessment result with score.\n\t *\n\t * @param {Paper} paper The paper to use for the assessment.\n\t * @param {Researcher} researcher The researcher used for calling research.\n\t * @param {Jed} i18n The object used for translations\n\t *\n\t * @returns {AssessmentResult} The assessment result.\n\t */\n\tgetResult( paper, researcher, i18n ) {\n\t\tconst pageTitleWidth = researcher.getResearch( \"pageTitleWidth\" );\n\t\tconst assessmentResult = new AssessmentResult();\n\n\t\tassessmentResult.setScore( this.calculateScore( pageTitleWidth ) );\n\t\tassessmentResult.setText( this.translateScore( pageTitleWidth, i18n ) );\n\n\t\t// Max and actual are used in the snippet editor progress bar.\n\t\tassessmentResult.max = this._config.maxLength;\n\t\tassessmentResult.actual = pageTitleWidth;\n\t\treturn assessmentResult;\n\t}\n\n\t/**\n\t * Returns the score for the pageTitleWidth\n\t *\n\t * @param {number} pageTitleWidth The width of the pageTitle.\n\t *\n\t * @returns {number} The calculated score.\n\t */\n\tcalculateScore( pageTitleWidth ) {\n\t\tif ( inRange( pageTitleWidth, 1, 400 ) ) {\n\t\t\treturn this._config.scores.widthTooShort;\n\t\t}\n\n\t\tif ( inRange( pageTitleWidth, this._config.minLength, this._config.maxLength ) ) {\n\t\t\treturn this._config.scores.widthCorrect;\n\t\t}\n\n\t\tif ( pageTitleWidth > this._config.maxLength ) {\n\t\t\treturn this._config.scores.widthTooLong;\n\t\t}\n\n\t\treturn this._config.scores.noTitle;\n\t}\n\n\t/**\n\t * Translates the pageTitleWidth score to a message the user can understand.\n\t *\n\t * @param {number} pageTitleWidth The width of the pageTitle.\n\t * @param {Jed} i18n The object used for translations.\n\t *\n\t * @returns {string} The translated string.\n\t */\n\ttranslateScore( pageTitleWidth, i18n ) {\n\t\tif ( inRange( pageTitleWidth, 1, 400 ) ) {\n\t\t\treturn i18n.sprintf(\n\t\t\t\t/* Translators: %1$s and %2$s expand to links on yoast.com, %3$s expands to the anchor end tag */\n\t\t\t\ti18n.dgettext(\n\t\t\t\t\t\"js-text-analysis\",\n\t\t\t\t\t\"%1$sSEO title width%3$s: The SEO title is too short. \" +\n\t\t\t\t\t\"%2$sUse the space to add keyphrase variations or create compelling call-to-action copy%3$s.\"\n\t\t\t\t),\n\t\t\t\tthis._config.urlTitle,\n\t\t\t\tthis._config.urlCallToAction,\n\t\t\t\t\"</a>\"\n\t\t\t);\n\t\t}\n\n\t\tif ( inRange( pageTitleWidth, this._config.minLength, this._config.maxLength ) ) {\n\t\t\treturn i18n.sprintf(\n\t\t\t\t/* Translators:  %1$s expands to a link on yoast.com, %2$s expands to the anchor end tag */\n\t\t\t\ti18n.dgettext(\n\t\t\t\t\t\"js-text-analysis\",\n\t\t\t\t\t\"%1$sSEO title width%2$s: Good job!\"\n\t\t\t\t),\n\t\t\t\tthis._config.urlTitle,\n\t\t\t\t\"</a>\"\n\t\t\t);\n\t\t}\n\n\t\tif ( pageTitleWidth > this._config.maxLength ) {\n\t\t\treturn i18n.sprintf(\n\t\t\t\t/* Translators: %1$s and %2$s expand to links on yoast.com, %3$s expands to the anchor end tag */\n\t\t\t\ti18n.dgettext(\n\t\t\t\t\t\"js-text-analysis\",\n\t\t\t\t\t\"%1$sSEO title width%3$s: The SEO title wider than the viewable limit. %2$sTry to make it shorter%3$s.\"\n\t\t\t\t),\n\t\t\t\tthis._config.urlTitle,\n\t\t\t\tthis._config.urlCallToAction,\n\t\t\t\t\"</a>\"\n\t\t\t);\n\t\t}\n\n\t\treturn i18n.sprintf(\n\t\t\t/* Translators: %1$s and %2$s expand to links on yoast.com, %3$s expands to the anchor end tag */\n\t\t\ti18n.dgettext( \"js-text-analysis\", \"%1$sSEO title width%3$s: %2$sPlease create an SEO title%3$s.\" ),\n\t\t\tthis._config.urlTitle,\n\t\t\tthis._config.urlCallToAction,\n\t\t\t\"</a>\"\n\t\t);\n\t}\n}\n"]}