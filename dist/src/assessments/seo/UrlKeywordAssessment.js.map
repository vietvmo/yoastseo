{"version":3,"sources":["../../../../src/assessments/seo/UrlKeywordAssessment.js"],"names":["merge","Assessment","createAnchorOpeningTag","AssessmentResult","UrlKeywordAssessment","constructor","config","defaultConfig","scores","okay","good","urlTitle","urlCallToAction","identifier","_config","getResult","paper","researcher","i18n","_keywordInURL","getResearch","assessmentResult","calculatedResult","calculateResult","setScore","score","setText","resultText","isApplicable","hasKeyword","hasUrl","keyphraseLength","percentWordMatches","sprintf","dgettext"],"mappings":"AAAA,SAASA,KAAT,QAAsB,WAAtB;;AAEA,OAAOC,UAAP,MAAuB,kBAAvB;AACA,SAASC,sBAAT,QAAuC,2BAAvC;AACA,OAAOC,gBAAP,MAA6B,+BAA7B;;AAEA;;;AAGA,MAAMC,oBAAN,SAAmCH,UAAnC,CAA8C;AAC7C;;;;;;;;;;AAUAI,aAAaC,SAAS,EAAtB,EAA2B;AAC1B;;AAEA,QAAMC,gBAAgB;AACrBC,WAAQ;AACPC,UAAM,CADC;AAEPC,UAAM;AAFC,IADa;AAKrBC,aAAUT,uBAAwB,oBAAxB,CALW;AAMrBU,oBAAiBV,uBAAwB,oBAAxB;AANI,GAAtB;;AASA,OAAKW,UAAL,GAAkB,YAAlB;AACA,OAAKC,OAAL,GAAed,MAAOO,aAAP,EAAsBD,MAAtB,CAAf;AACA;;AAED;;;;;;;;;AASAS,WAAWC,KAAX,EAAkBC,UAAlB,EAA8BC,IAA9B,EAAqC;AACpC,OAAKC,aAAL,GAAqBF,WAAWG,WAAX,CAAwB,mBAAxB,CAArB;;AAEA,QAAMC,mBAAmB,IAAIlB,gBAAJ,EAAzB;;AAEA,QAAMmB,mBAAmB,KAAKC,eAAL,CAAsBL,IAAtB,CAAzB;AACAG,mBAAiBG,QAAjB,CAA2BF,iBAAiBG,KAA5C;AACAJ,mBAAiBK,OAAjB,CAA0BJ,iBAAiBK,UAA3C;;AAEA,SAAON,gBAAP;AACA;;AAED;;;;;;;AAOAO,cAAcZ,KAAd,EAAsB;AACrB,SAAOA,MAAMa,UAAN,MAAsBb,MAAMc,MAAN,EAA7B;AACA;;AAED;;;;;;;AAOAP,iBAAiBL,IAAjB,EAAwB;AACvB,MAAK,KAAKC,aAAL,CAAmBY,eAAnB,GAAqC,CAA1C,EAA8C;AAC7C,OAAK,KAAKZ,aAAL,CAAmBa,kBAAnB,KAA0C,GAA/C,EAAqD;AACpD,WAAO;AACNP,YAAO,KAAKX,OAAL,CAAaN,MAAb,CAAoBE,IADrB;AAENiB,iBAAYT,KAAKe,OAAL;AACX;AACAf,UAAKgB,QAAL,CACC,kBADD,EAEC,wCAFD,CAFW,EAMX,KAAKpB,OAAL,CAAaH,QANF,EAOX,MAPW;AAFN,KAAP;AAYA;;AAED,UAAO;AACNc,WAAO,KAAKX,OAAL,CAAaN,MAAb,CAAoBC,IADrB;AAENkB,gBAAYT,KAAKe,OAAL;AACX;AACAf,SAAKgB,QAAL,CACC,kBADD,EAEC,uGAFD,CAFW,EAMX,KAAKpB,OAAL,CAAaH,QANF,EAOX,KAAKG,OAAL,CAAaF,eAPF,EAQX,MARW;AAFN,IAAP;AAaA;;AAED,MAAK,KAAKO,aAAL,CAAmBa,kBAAnB,GAAwC,EAA7C,EAAkD;AACjD,UAAO;AACNP,WAAO,KAAKX,OAAL,CAAaN,MAAb,CAAoBE,IADrB;AAENiB,gBAAYT,KAAKe,OAAL;AACX;AACAf,SAAKgB,QAAL,CACC,kBADD,EAEC,gGAFD,CAFW,EAMX,KAAKpB,OAAL,CAAaH,QANF,EAOX,MAPW;AAFN,IAAP;AAYA;AACD,SAAO;AACNc,UAAO,KAAKX,OAAL,CAAaN,MAAb,CAAoBC,IADrB;AAENkB,eAAYT,KAAKe,OAAL;AACX;AACAf,QAAKgB,QAAL,CACC,kBADD,EAEC,uGAFD,CAFW,EAMX,KAAKpB,OAAL,CAAaH,QANF,EAOX,KAAKG,OAAL,CAAaF,eAPF,EAQX,MARW;AAFN,GAAP;AAaA;AA7H4C;;AAgI9C,eAAeR,oBAAf","file":"UrlKeywordAssessment.js","sourcesContent":["import { merge } from \"lodash-es\";\n\nimport Assessment from \"../../assessment\";\nimport { createAnchorOpeningTag } from \"../../helpers/shortlinker\";\nimport AssessmentResult from \"../../values/AssessmentResult\";\n\n/**\n * Represents the URL keyword assessments. This assessments will check if the keyword is present in the url.\n */\nclass UrlKeywordAssessment extends Assessment {\n\t/**\n\t * Sets the identifier and the config.\n\t *\n\t * @param {Object} config The configuration to use.\n\t * @param {number} [config.scores.noKeywordInUrl] The score to return if the keyword is not in the URL.\n\t * @param {number} [config.scores.good] The score to return if the keyword is in the URL.\n\t * @param {string} [config.url] The URL to the relevant KB article.\n\t *\n\t * @returns {void}\n\t */\n\tconstructor( config = {} ) {\n\t\tsuper();\n\n\t\tconst defaultConfig = {\n\t\t\tscores: {\n\t\t\t\tokay: 6,\n\t\t\t\tgood: 9,\n\t\t\t},\n\t\t\turlTitle: createAnchorOpeningTag( \"https://yoa.st/33o\" ),\n\t\t\turlCallToAction: createAnchorOpeningTag( \"https://yoa.st/33p\" ),\n\t\t};\n\n\t\tthis.identifier = \"urlKeyword\";\n\t\tthis._config = merge( defaultConfig, config );\n\t}\n\n\t/**\n\t * Executes the Assessment and returns a result.\n\t *\n\t * @param {Paper} paper The Paper object to assess.\n\t * @param {Researcher} researcher The Researcher object containing all available researches.\n\t * @param {Jed} i18n The object used for translations.\n\t *\n\t * @returns {AssessmentResult} The result of the assessment, containing both a score and a descriptive text.\n\t */\n\tgetResult( paper, researcher, i18n ) {\n\t\tthis._keywordInURL = researcher.getResearch( \"keywordCountInUrl\" );\n\n\t\tconst assessmentResult = new AssessmentResult();\n\n\t\tconst calculatedResult = this.calculateResult( i18n );\n\t\tassessmentResult.setScore( calculatedResult.score );\n\t\tassessmentResult.setText( calculatedResult.resultText );\n\n\t\treturn assessmentResult;\n\t}\n\n\t/**\n\t * Checks whether the paper has a keyword and a url.\n\t *\n\t * @param {Paper} paper The paper to use for the assessment.\n\t *\n\t * @returns {boolean} True when there is a keyword and an url.\n\t */\n\tisApplicable( paper ) {\n\t\treturn paper.hasKeyword() && paper.hasUrl();\n\t}\n\n\t/**\n\t * Determines the score and the result text based on whether or not there's a keyword in the url.\n\t *\n\t * @param {Jed} i18n The object used for translations.\n\t *\n\t * @returns {Object} The object with calculated score and resultText.\n\t */\n\tcalculateResult( i18n ) {\n\t\tif ( this._keywordInURL.keyphraseLength < 3 ) {\n\t\t\tif ( this._keywordInURL.percentWordMatches === 100 ) {\n\t\t\t\treturn {\n\t\t\t\t\tscore: this._config.scores.good,\n\t\t\t\t\tresultText: i18n.sprintf(\n\t\t\t\t\t\t/* Translators:  %1$s expands to a link on yoast.com, %2$s expands to the anchor end tag */\n\t\t\t\t\t\ti18n.dgettext(\n\t\t\t\t\t\t\t\"js-text-analysis\",\n\t\t\t\t\t\t\t\"%1$sKeyphrase in slug%2$s: Great work!\"\n\t\t\t\t\t\t),\n\t\t\t\t\t\tthis._config.urlTitle,\n\t\t\t\t\t\t\"</a>\"\n\t\t\t\t\t),\n\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tscore: this._config.scores.okay,\n\t\t\t\tresultText: i18n.sprintf(\n\t\t\t\t\t/* Translators:  %1$s and %2$s expand to links on yoast.com, %3$s expands to the anchor end tag */\n\t\t\t\t\ti18n.dgettext(\n\t\t\t\t\t\t\"js-text-analysis\",\n\t\t\t\t\t\t\"%1$sKeyphrase in slug%3$s: (Part of) your keyphrase does not appear in the slug. %2$sChange that%3$s!\"\n\t\t\t\t\t),\n\t\t\t\t\tthis._config.urlTitle,\n\t\t\t\t\tthis._config.urlCallToAction,\n\t\t\t\t\t\"</a>\"\n\t\t\t\t),\n\t\t\t};\n\t\t}\n\n\t\tif ( this._keywordInURL.percentWordMatches > 50 ) {\n\t\t\treturn {\n\t\t\t\tscore: this._config.scores.good,\n\t\t\t\tresultText: i18n.sprintf(\n\t\t\t\t\t/* Translators:  %1$s expands to a link on yoast.com, %2$s expands to the anchor end tag */\n\t\t\t\t\ti18n.dgettext(\n\t\t\t\t\t\t\"js-text-analysis\",\n\t\t\t\t\t\t\"%1$sKeyphrase in slug%2$s: More than half of your keyphrase appears in the slug. That's great!\"\n\t\t\t\t\t),\n\t\t\t\t\tthis._config.urlTitle,\n\t\t\t\t\t\"</a>\"\n\t\t\t\t),\n\t\t\t};\n\t\t}\n\t\treturn {\n\t\t\tscore: this._config.scores.okay,\n\t\t\tresultText: i18n.sprintf(\n\t\t\t\t/* Translators:  %1$s and %2$s expand to links on yoast.com, %3$s expands to the anchor end tag */\n\t\t\t\ti18n.dgettext(\n\t\t\t\t\t\"js-text-analysis\",\n\t\t\t\t\t\"%1$sKeyphrase in slug%3$s: (Part of) your keyphrase does not appear in the slug. %2$sChange that%3$s!\"\n\t\t\t\t),\n\t\t\t\tthis._config.urlTitle,\n\t\t\t\tthis._config.urlCallToAction,\n\t\t\t\t\"</a>\"\n\t\t\t),\n\t\t};\n\t}\n}\n\nexport default UrlKeywordAssessment;\n"]}