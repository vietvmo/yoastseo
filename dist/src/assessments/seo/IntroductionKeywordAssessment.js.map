{"version":3,"sources":["../../../../src/assessments/seo/IntroductionKeywordAssessment.js"],"names":["merge","Assessment","createAnchorOpeningTag","AssessmentResult","IntroductionKeywordAssessment","constructor","config","defaultConfig","scores","good","okay","bad","urlTitle","urlCallToAction","identifier","_config","getResult","paper","researcher","i18n","assessmentResult","_firstParagraphMatches","getResearch","calculatedResult","calculateResult","setScore","score","setText","resultText","isApplicable","hasKeyword","hasText","foundInOneSentence","sprintf","dgettext","foundInParagraph"],"mappings":"AAAA,SAASA,KAAT,QAAsB,WAAtB;;AAEA,OAAOC,UAAP,MAAuB,kBAAvB;AACA,SAASC,sBAAT,QAAuC,2BAAvC;AACA,OAAOC,gBAAP,MAA6B,+BAA7B;;AAEA;;;AAGA,MAAMC,6BAAN,SAA4CH,UAA5C,CAAuD;AACtD;;;;;;;;;;;AAWAI,aAAaC,SAAS,EAAtB,EAA2B;AAC1B;;AAEA,QAAMC,gBAAgB;AACrBC,WAAQ;AACPC,UAAM,CADC;AAEPC,UAAM,CAFC;AAGPC,SAAK;AAHE,IADa;AAMrBC,aAAUV,uBAAwB,oBAAxB,CANW;AAOrBW,oBAAiBX,uBAAwB,oBAAxB;AAPI,GAAtB;;AAUA,OAAKY,UAAL,GAAkB,qBAAlB;AACA,OAAKC,OAAL,GAAef,MAAOO,aAAP,EAAsBD,MAAtB,CAAf;AACA;;AAED;;;;;;;;;AASAU,WAAWC,KAAX,EAAkBC,UAAlB,EAA8BC,IAA9B,EAAqC;AACpC,QAAMC,mBAAmB,IAAIjB,gBAAJ,EAAzB;;AAEA,OAAKkB,sBAAL,GAA8BH,WAAWI,WAAX,CAAwB,gBAAxB,CAA9B;AACA,QAAMC,mBAAmB,KAAKC,eAAL,CAAsBL,IAAtB,CAAzB;;AAEAC,mBAAiBK,QAAjB,CAA2BF,iBAAiBG,KAA5C;AACAN,mBAAiBO,OAAjB,CAA0BJ,iBAAiBK,UAA3C;;AAEA,SAAOR,gBAAP;AACA;;AAED;;;;;;;AAOAS,cAAcZ,KAAd,EAAsB;AACrB,SAAOA,MAAMa,UAAN,MAAsBb,MAAMc,OAAN,EAA7B;AACA;;AAED;;;;;;;AAOAP,iBAAiBL,IAAjB,EAAwB;AACvB,MAAK,KAAKE,sBAAL,CAA4BW,kBAAjC,EAAsD;AACrD,UAAO;AACNN,WAAO,KAAKX,OAAL,CAAaP,MAAb,CAAoBC,IADrB;AAENmB,gBAAYT,KAAKc,OAAL;AACX;AACAd,SAAKe,QAAL,CACC,kBADD,EAEC,+CAFD,CAFW,EAMX,KAAKnB,OAAL,CAAaH,QANF,EAOX,MAPW;AAFN,IAAP;AAYA;;AAED,MAAK,KAAKS,sBAAL,CAA4Bc,gBAAjC,EAAoD;AACnD,UAAO;AACNT,WAAO,KAAKX,OAAL,CAAaP,MAAb,CAAoBE,IADrB;AAENkB,gBAAYT,KAAKc,OAAL;AACX;AACAd,SAAKe,QAAL,CACC,kBADD,EAEC,uCACA,0HAHD,CAFW,EAOX,KAAKnB,OAAL,CAAaH,QAPF,EAQX,KAAKG,OAAL,CAAaF,eARF,EASX,MATW;AAFN,IAAP;AAcA;;AAED,SAAO;AACNa,UAAO,KAAKX,OAAL,CAAaP,MAAb,CAAoBG,GADrB;AAENiB,eAAYT,KAAKc,OAAL;AACX;AACAd,QAAKe,QAAL,CACC,kBADD,EAEC,6GACA,mDAHD,CAFW,EAOX,KAAKnB,OAAL,CAAaH,QAPF,EAQX,KAAKG,OAAL,CAAaF,eARF,EASX,MATW;AAFN,GAAP;AAcA;AAnHqD;;AAsHvD,eAAeT,6BAAf","file":"IntroductionKeywordAssessment.js","sourcesContent":["import { merge } from \"lodash-es\";\n\nimport Assessment from \"../../assessment\";\nimport { createAnchorOpeningTag } from \"../../helpers/shortlinker\";\nimport AssessmentResult from \"../../values/AssessmentResult\";\n\n/**\n * Assessment to check whether the keyphrase or synonyms are encountered in the first paragraph of the article.\n */\nclass IntroductionKeywordAssessment extends Assessment {\n\t/**\n\t * Sets the identifier and the config.\n\t *\n\t * @param {Object} [config] The configuration to use.\n\t * @param {number} [config.scores.good] The score to return if there is a match within one sentence in the first paragraph.\n\t * @param {number} [config.scores.okay] The score to return if all words are matched in the first paragraph.\n\t * @param {number} [config.scores.bad] The score to return if not all words are matched in the first paragraph.\n\t * @param {string} [config.url] The URL to the relevant article on Yoast.com.\n\t *\n\t * @returns {void}\n\t */\n\tconstructor( config = {} ) {\n\t\tsuper();\n\n\t\tconst defaultConfig = {\n\t\t\tscores: {\n\t\t\t\tgood: 9,\n\t\t\t\tokay: 6,\n\t\t\t\tbad: 3,\n\t\t\t},\n\t\t\turlTitle: createAnchorOpeningTag( \"https://yoa.st/33e\" ),\n\t\t\turlCallToAction: createAnchorOpeningTag( \"https://yoa.st/33f\" ),\n\t\t};\n\n\t\tthis.identifier = \"introductionKeyword\";\n\t\tthis._config = merge( defaultConfig, config );\n\t}\n\n\t/**\n\t * Assesses the presence of keyphrase or synonyms in the first paragraph.\n\t *\n\t * @param {Paper} paper The paper to use for the assessment.\n\t * @param {Researcher} researcher The researcher used for calling research.\n\t * @param {Jed} i18n The object used for translations.\n\t *\n\t * @returns {AssessmentResult} The result of this assessment.\n\t */\n\tgetResult( paper, researcher, i18n ) {\n\t\tconst assessmentResult = new AssessmentResult();\n\n\t\tthis._firstParagraphMatches = researcher.getResearch( \"firstParagraph\" );\n\t\tconst calculatedResult = this.calculateResult( i18n );\n\n\t\tassessmentResult.setScore( calculatedResult.score );\n\t\tassessmentResult.setText( calculatedResult.resultText );\n\n\t\treturn assessmentResult;\n\t}\n\n\t/**\n\t * Checks if the paper has both keyword and text.\n\t *\n\t * @param {Paper} paper The paper to be analyzed.\n\t *\n\t * @returns {boolean} Whether the assessment is applicable or not.\n\t */\n\tisApplicable( paper ) {\n\t\treturn paper.hasKeyword() && paper.hasText();\n\t}\n\n\t/**\n\t * Returns a result based on the number of occurrences of keyphrase in the first paragraph.\n\t *\n\t * @param {Jed} i18n The object used for translations.\n\t *\n\t * @returns {Object} result object with a score and translation text.\n\t */\n\tcalculateResult( i18n ) {\n\t\tif ( this._firstParagraphMatches.foundInOneSentence ) {\n\t\t\treturn {\n\t\t\t\tscore: this._config.scores.good,\n\t\t\t\tresultText: i18n.sprintf(\n\t\t\t\t\t/* Translators: %1$s expands to a link on yoast.com, %2$s expands to the anchor end tag. */\n\t\t\t\t\ti18n.dgettext(\n\t\t\t\t\t\t\"js-text-analysis\",\n\t\t\t\t\t\t\"%1$sKeyphrase in introduction%2$s: Well done!\"\n\t\t\t\t\t),\n\t\t\t\t\tthis._config.urlTitle,\n\t\t\t\t\t\"</a>\"\n\t\t\t\t),\n\t\t\t};\n\t\t}\n\n\t\tif ( this._firstParagraphMatches.foundInParagraph ) {\n\t\t\treturn {\n\t\t\t\tscore: this._config.scores.okay,\n\t\t\t\tresultText: i18n.sprintf(\n\t\t\t\t\t/* Translators: %1$s and %2$s expand to links on yoast.com, %3$s expands to the anchor end tag. */\n\t\t\t\t\ti18n.dgettext(\n\t\t\t\t\t\t\"js-text-analysis\",\n\t\t\t\t\t\t\"%1$sKeyphrase in introduction%3$s:\" +\n\t\t\t\t\t\t\"Your keyphrase or its synonyms appear in the first paragraph of the copy, but not within one sentence. %2$sFix that%3$s!\"\n\t\t\t\t\t),\n\t\t\t\t\tthis._config.urlTitle,\n\t\t\t\t\tthis._config.urlCallToAction,\n\t\t\t\t\t\"</a>\"\n\t\t\t\t),\n\t\t\t};\n\t\t}\n\n\t\treturn {\n\t\t\tscore: this._config.scores.bad,\n\t\t\tresultText: i18n.sprintf(\n\t\t\t\t/* Translators: %1$s and %2$s expand to links on yoast.com, %3$s expands to the anchor end tag. */\n\t\t\t\ti18n.dgettext(\n\t\t\t\t\t\"js-text-analysis\",\n\t\t\t\t\t\"%1$sKeyphrase in introduction%3$s: Your keyphrase or its synonyms do not appear in the first paragraph. \" +\n\t\t\t\t\t\"%2$sMake sure the topic is clear immediately%3$s.\"\n\t\t\t\t),\n\t\t\t\tthis._config.urlTitle,\n\t\t\t\tthis._config.urlCallToAction,\n\t\t\t\t\"</a>\"\n\t\t\t),\n\t\t};\n\t}\n}\n\nexport default IntroductionKeywordAssessment;\n"]}